setting a custom hostname on openstack:

#cloud-config 
hostname: foo.example.com

SERVER=openshift.example.com

ipa service-add HTTP/$SERVER

ipa host-add $SERVER

ipa service-add-host --hosts $(hostname -f) HTTP/$SERVER

ipa cert-request --principal=HTTP/$SERVER

ipa-getcert request -k /etc/pki/tls/private/$SERVER.key -f /etc/pki/tls/certs/$SERVER.crt -r -N CN=$SERVER -D $SERVER -K HTTP/$SERVER
